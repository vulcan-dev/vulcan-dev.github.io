import{a as x,o as n,b as l,f as e,t as d,i as p,j as u,F as h,r as _,w as f,v as g,k as v,c as w,p as L,l as C,m as j}from"./entry.56c8d31c.js";const D={name:"ConfirmDialog",props:{message:{type:String,required:!0},confirmDelete:{type:Function,required:!0},cancelDelete:{type:Function,required:!0}}},T={class:"fixed top-0 left-0 w-full h-full flex items-center justify-center"},P={class:"border border-dashed bg-slate-600 rounded-lg p-8"},N={class:"mb-4"},S={class:"flex justify-center gap-4"};function I(r,s,c,k,o,i){return n(),l("div",T,[e("div",P,[e("p",N,d(c.message),1),e("div",S,[e("button",{class:"p-2 cursor-pointer border border-dashed w-full hover:bg-slate-500",onClick:s[0]||(s[0]=(...a)=>c.confirmDelete&&c.confirmDelete(...a))}," Yes "),e("button",{class:"p-2 cursor-pointer border border-dashed w-full hover:bg-slate-500",onClick:s[1]||(s[1]=(...a)=>c.cancelDelete&&c.cancelDelete(...a))}," No ")])])])}const b=x(D,[["render",I]]);const V={name:"Project",components:{ConfirmDialog:b},props:{id:{type:[String,Number,null],required:!0},isNew:{type:Boolean,required:!0}},data(){return{project:{title:"Project Title",body:"Project Body",tags:[],links:[],status:"Status",id:null},backup:{},newTag:"",link:{name:"",url:""},addingLink:!1,confirming:!1}},mounted(){this.isNew?this.project={title:"Project Title",body:"Project Body",tags:[],links:[],status:"Status",id:null}:this.project=this.$store.getters["projects/projects"].find(r=>r.id===this.id),this.backup=JSON.parse(JSON.stringify(this.project))},methods:{reset(){this.project=JSON.parse(JSON.stringify(this.backup)),this.newTag="",this.link={name:"",url:""},this.addingLink=!1,this.$store.dispatch("projects/unstageProject",this.project)},deleteProject(){this.$store.dispatch("projects/deleteProject",this.project),this.$store.getters["projects/projects"].length===0&&this.$store.dispatch("editing/setEditing",!1)},stage(){if(this.isNew)this.$store.dispatch("projects/addProject",this.project),this.$store.dispatch("editing/setEditing",!1),this.$store.dispatch("editing/setCreatingProject",!1),this.$store.dispatch("projects/getProjects");else{if(JSON.stringify(this.project)===JSON.stringify(this.backup))return;this.$store.dispatch("projects/stageProject",this.project)}},addTag(){this.project.tags.push(this.newTag),this.newTag=""},removeTag(r){this.project.tags=this.project.tags.filter(s=>s!==r)},addLink(){this.link.name===""||this.link.url===""||!new RegExp(/^(http|https):\/\/[a-zA-Z0-9-\.]+\.[a-z]{2,4}/).test(this.link.url)||(this.project.links.push(this.link),this.link={name:"",url:""},this.addingLink=!1)},removeLink(r){this.project.links=this.project.links.filter(s=>s!==r)},cancelLink(){this.link={name:"",url:""},this.addingLink=!1},confirmDelete(){this.deleteProject(),this.confirming=!1},cancelDelete(){this.confirming=!1},timestampToDate(r){return new Date(r*1e3).toLocaleString()}}},U=r=>(L("data-v-193b64b0"),r=r(),C(),r),B={class:"p-4 border border-dashed"},A={key:0,class:"flex flex-row"},J={class:"left-0 top-0 flex flex-col justify-start w-full gap-2"},O={class:"flex flex-row"},q={class:"text-2xl font-bold"},H={key:0,class:"text-sm font-normal text-gray-500"},M={class:"flex flex-col"},R=["innerHTML"],E={class:"mt-4"},F={class:"flex flex-col"},z={class:"flex flex-row"},K={class:"text-sm font-normal text-gray-500"},Y={class:"font-bold"},Z={class:"text-sm font-normal text-gray-500"},$={class:"font-bold"},G={key:0,class:"text-sm font-normal text-gray-500"},Q={class:"font-bold"},W={class:"list-inside text-green-500 underline gap-3"},X=["href"],ee={key:0,class:"flex flex-row gap-3 h-full"},te=U(()=>e("button",{class:"text-red-500 font-bold underline"}," Delete ",-1)),se=[te],oe={key:1,class:"editingArea flex flex-col gap-3"},ne={class:"flex flex-row gap-3"},le={class:"flex flex-row gap-3"},re={class:"flex flex-row gap-3 flex-wrap w-full"},ie={class:"tag mr-1 mb-1"},de={class:"text-sm font-normal p-2 border border-dashed h-full"},ce=["onClick"],ae={class:"flex flex-col gap-3"},ue={class:"tag mr-1 mb-1"},pe={class:"text-sm font-normal p-2 border border-dashed h-full"},fe=["onClick"],ge={key:1,class:"text-sm font-normal text-gray-500"},he={key:2,class:"flex flex-row gap-3"},_e={key:3,class:"flex flex-row gap-3"},me={class:"flex flex-row gap-3"},xe={class:"flex flex-row gap-3"},ke={key:0},je={key:1};function be(r,s,c,k,o,i){const a=b;return n(),l(h,null,[e("div",B,[r.$store.getters["editing/editing"]?(n(),l("div",oe,[e("div",ne,[f(e("input",{class:"w-full",type:"text","onUpdate:modelValue":s[0]||(s[0]=t=>o.project.title=t),placeholder:"Project Title"},null,512),[[g,o.project.title]])]),e("div",le,[f(e("textarea",{class:"w-full","onUpdate:modelValue":s[1]||(s[1]=t=>o.project.body=t),placeholder:"Project Description"},null,512),[[g,o.project.body]])]),e("div",re,[(n(!0),l(h,null,_(o.project.tags,t=>(n(),l("div",ie,[e("span",de,[p(d(t)+" ",1),e("span",{class:"ml-1 cursor-pointer",onClick:m=>i.removeTag(t)}," x ",8,ce)])]))),256)),f(e("input",{class:"w-full",type:"text","onUpdate:modelValue":s[2]||(s[2]=t=>o.newTag=t),placeholder:"Tags",onKeyup:s[3]||(s[3]=v((...t)=>i.addTag&&i.addTag(...t),["enter"]))},null,544),[[g,o.newTag]])]),e("div",ae,[o.project.links.length>0?(n(!0),l(h,{key:0},_(o.project.links,t=>(n(),l("div",ue,[e("span",pe,[p(d(t.name)+": "+d(t.url)+" ",1),e("span",{class:"ml-1 cursor-pointer",onClick:m=>i.removeLink(t)}," x ",8,fe)])]))),256)):(n(),l("div",ge," No links ")),o.addingLink?(n(),l("div",he,[f(e("input",{class:"w-full",type:"text","onUpdate:modelValue":s[4]||(s[4]=t=>o.link.name=t),placeholder:"Link Name"},null,512),[[g,o.link.name]]),f(e("input",{class:"w-full",type:"text","onUpdate:modelValue":s[5]||(s[5]=t=>o.link.url=t),placeholder:"Link URL"},null,512),[[g,o.link.url]]),e("button",{class:"text-green-500 font-bold underline",onClick:s[6]||(s[6]=(...t)=>i.addLink&&i.addLink(...t))}," Add "),e("button",{class:"text-red-500 font-bold underline",onClick:s[7]||(s[7]=(...t)=>i.cancelLink&&i.cancelLink(...t))}," Cancel ")])):(n(),l("div",_e,[e("button",{class:"p-2 cursor-pointer border border-dashed",onClick:s[8]||(s[8]=t=>o.addingLink=!0)}," Add Link ")]))]),e("div",me,[f(e("input",{class:"w-full",type:"text","onUpdate:modelValue":s[9]||(s[9]=t=>o.project.status=t),placeholder:"Status"},null,512),[[g,o.project.status]])]),e("div",xe,[c.isNew?u("",!0):(n(),l("button",{key:0,class:"text-red-500 font-bold underline",onClick:s[10]||(s[10]=(...t)=>i.reset&&i.reset(...t))}," Reset ")),c.isNew?u("",!0):(n(),l("button",{key:1,class:"text-red-500 font-bold underline",onClick:s[11]||(s[11]=t=>o.confirming=!0)}," Delete ")),e("button",{class:"text-green-500 font-bold underline",onClick:s[12]||(s[12]=(...t)=>i.stage&&i.stage(...t))},[c.isNew?(n(),l("span",ke," Add ")):(n(),l("span",je," Stage "))])])])):(n(),l("div",A,[e("div",J,[e("section",O,[e("h2",q,[p(d(o.project.title)+" ",1),o.project.tags.length>0?(n(),l("span",H,d(o.project.tags.join(", ")),1)):u("",!0)])]),e("section",M,[e("div",{innerHTML:o.project.body},null,8,R)]),e("section",E,[e("div",F,[e("section",z,[e("span",K,[p(" Status: "),e("span",Y,d(o.project.status),1)])]),e("span",Z,[p(" Created: "),e("span",$,d(i.timestampToDate(o.project.created_at)),1)]),o.project.created_at!==o.project.updated_at?(n(),l("span",G,[p(" Updated: "),e("span",Q,d(i.timestampToDate(o.project.updated_at)),1)])):u("",!0),e("ul",W,[(n(!0),l(h,null,_(o.project.links,t=>(n(),l("li",{key:t.id},[e("a",{href:t.url},d(t.name),9,X)]))),128))])])])]),r.$store.getters["editing/editing"]?(n(),l("div",ee,se)):u("",!0)]))]),o.confirming?(n(),w(a,{key:0,message:`Are you sure you want to delete ${o.project.title}?`,confirmDelete:i.confirmDelete,cancelDelete:i.cancelDelete},null,8,["message","confirmDelete","cancelDelete"])):u("",!0)],64)}const ye=x(V,[["render",be],["__scopeId","data-v-193b64b0"]]),ve={name:"projects",mounted(){this.loadProjects()},data(){return{expanded:[]}},computed:{isLoggedIn(){let r=this.$store.getters.user.loggedIn;return console.log("isLoggedIn: ",r),this.$store.getters.user.loggedIn},projects(){return this.$store.getters["projects/projects"]}},watch:{projects(){}},methods:{loadProjects(){this.$store.dispatch("projects/getProjects")}}},we={class:"py-2"},Le=e("h1",{class:"text-3xl font-bold"},"Projects",-1),Ce=e("p",{class:"text-xl"},"Here are some of my projects",-1),De={key:0,class:"py-2"},Te={key:1},Pe={key:2,class:"py-2 flex flex-col gap-4"},Ne={class:"flex flex-col gap-4"},Se={key:0,class:"flex flex-col gap-4"},Ie=["onClick"],Ve=["onClick"],Ue={class:"text-xl font-bold"},Be=["innerHTML"];function Ae(r,s,c,k,o,i){const a=ye;return n(),l("div",we,[Le,Ce,i.isLoggedIn&&r.$store.getters["editing/editing"]?(n(),l("div",De,[e("button",{class:"p-2 w-full text-white font-bold border border-dashed hover:bg-opacity-75",onClick:s[0]||(s[0]=t=>r.$store.dispatch("editing/setCreatingProject",!0))}," + ")])):u("",!0),r.$store.getters["editing/creatingProject"]?(n(),l("div",Te,[j(a,{isNew:!0})])):(n(),l("div",Pe,[e("ul",Ne,[(n(!0),l(h,null,_(i.projects,t=>(n(),l("li",{key:t.id},[o.expanded.includes(t.id)?(n(),l("div",Se,[j(a,{id:t.id,isNew:!1},null,8,["id"]),r.$store.getters["editing/editing"]?u("",!0):(n(),l("button",{key:0,onClick:m=>o.expanded=o.expanded.filter(y=>y!==t.id),class:"p-2 text-white font-bold border border-dashed hover:border-green-500"}," Collapse ",8,Ie))])):(n(),l("div",{key:1,class:"flex flex-row w-full gap-4 border border-dashed items-center p-2 hover:cursor-pointer hover:border-green-500",onClick:m=>o.expanded.push(t.id)},[e("h2",Ue,d(t.title),1),e("div",{innerHTML:t.body},null,8,Be)],8,Ve))]))),128))])]))])}const Oe=x(ve,[["render",Ae]]);export{Oe as default};
